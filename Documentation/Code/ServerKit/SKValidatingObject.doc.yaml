copyright: Copyright Â© 2020 Breakside Inc.
introduced: 2020.1.0
kind: class
inherits: JSObject
summary: An object wrapper that can return properties after performing input
  validation on their values
description: |
  Used by `SKHTTPRequest` to provide user input in a form that can be
  easily validated.

  `SKValidatingObject` supports type checking, range checking, or any
  arbitrary validation function you want to provide.
topics:
  -
    name: Creating a Validating Object
    summary:
      -
        name: initWithObject
        kind: init
        summary: Wrap the given object so its properties can be validated
        arguments:
          -
            name: object
            type: dictionary
            summary: The dictionary to wrap
      -
        name: initWithObject
        kind: init
        summary: Wrap the given array so its properties can be validated
        arguments:
          -
            name: array
            type: Array
            summary: The array to wrap
        description: |
          When an array is wrapped, its propertes are still accessed in
          the same way as a dictionary, using array indexes as keys.

          However, wrapped arrays also expose a `length` property to support
          iteration.
  -
    name: Validation Errors
    members:
      -
        name: Error
        kind: class
        summary: An error class that is thrown for validation failures
        description: |
          If an `SKValidatingObject.Error` is thrown during a request,
          the `SKHTTPServer` will respond with a status code of
          `SKHTTPResponse.StatusCode.badRequest` and a JSON body that
          includes the error's `message`.
        topics:
          -
            name: Creating an Error
            members:
              -
                name: Error
                kind: constructor
                summary: Create a validation error with a message
                arguments:
                  -
                    name: message
                    type: String
                    summary: A message that will be returned in the response
                      body
          -
            name: Properties
            members:
              -
                name: message
                type: String
                summary: A message that will be returned in the response
                  body
  -
    name: String Properties
    members:
      -
        name: stringForKey
        kind: method
        type: String
        summary: Get a string for the given required key
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
        description: |
          If the key is missing or isn't a string, an error will be thrown
      -
        name: stringForKey
        suffix: custom
        kind: method
        type: String
        summary: Get a string for the given required key and validate using
          a custom function
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: validator
            type:
              arguments:
                -
                  name: string
                  type: String
                  summary: The string to validate
            summary: The custom validator function to use
        description: |
          If the key is missing or isn't a string, an error will be thrown.

          The custom validator should throw a `SKValidatingObject.Error` for
          any string that is not valid.
      -
        name: stringForKey
        suffix: default
        kind: method
        type: String
        summary: Get a string for the given key, or return a default value
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: defaultValue
            type: String
            nullable: true
            summary: The value to return if the key is not in the object.  May
              be `null`.
        description: |
          If the key isn't a string, an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.
      -
        name: stringForKey
        suffix: default-custom
        kind: method
        type: String
        summary: Get a string for the given key and validate using
          a custom function, or return a default value
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: defaultValue
            type: String
            nullable: true
            summary: The value to return if the key is not in the object.  May
              be `null`.
          -
            name: validator
            type:
              arguments:
                -
                  name: string
                  type: String
                  summary: The string to validate
            summary: The custom validator function to use
        description: |
          If the key isn't a string, an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.

          The custom validator should throw a `SKValidatingObject.Error` for
          any string that is not valid.
      -
        name: emailForKey
        kind: method
        type: String
        summary: Get a email address for the given required key
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
        description: |
          If the key is missing or isn't an email address, an error will be thrown
      -
        name: emailForKey
        suffix: default
        kind: method
        type: String
        summary: Get a email address for the given key, or return a default value
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: defaultValue
            type: String
            nullable: true
            summary: The value to return if the key is not in the object.  May
              be `null`.
        description: |
          If the key isn't an email address, an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.
  -
    name: Number Properties
    members:
      -
        name: numberForKey
        kind: method
        type: Number
        summary: Get a number for the given required key
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
        description: |
          If the key is missing or isn't a number, an error will be thrown
      -
        name: numberForKey
        suffix: custom
        kind: method
        type: Number
        summary: Get a number for the given required key and validate using
          a custom function
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: validator
            type:
              arguments:
                -
                  name: number
                  type: Number
                  summary: The number to validate
            summary: The custom validator function to use
        description: |
          If the key is missing or isn't a number, an error will be thrown.

          The custom validator should throw a `SKValidatingObject.Error` for
          any number that is not valid.
      -
        name: numberForKey
        suffix: default
        kind: method
        type: Number
        summary: Get a number for the given key, or return a default value
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: defaultValue
            type: Number
            nullable: true
            summary: The value to return if the key is not in the object.  May
              be `null`.
        description: |
          If the key isn't a number, an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.
      -
        name: numberForKey
        suffix: default-custom
        kind: method
        type: Number
        summary: Get a number for the given key and validate using
          a custom function, or return a default value
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: defaultValue
            type: Number
            nullable: true
            summary: The value to return if the key is not in the object.  May
              be `null`.
          -
            name: validator
            type:
              arguments:
                -
                  name: number
                  type: Number
                  summary: The number to validate
            summary: The custom validator function to use
        description: |
          If the key isn't a number, an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.

          The custom validator should throw a `SKValidatingObject.Error` for
          any string that is not valid.
      -
        name: numberForKeyInRange
        kind: method
        type: Number
        summary: Get a number for the given required key
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: min
            type: Number
            summary: The minimum value for the number
          -
            name: max
            type: Number
            summary: The maximum value for the number
        description: |
          If the key is missing, isn't a number, or is outside the given range,
          an error will be thrown.
        note: You can use `Infinity` or `-Infinity` for max or min to indicate
          no limit.
      -
        name: numberForKeyInRange
        suffix: default
        kind: method
        type: Number
        summary: Get a number for the given key, or return a default value
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: min
            type: Number
            summary: The minimum value for the number
          -
            name: max
            type: Number
            summary: The maximum value for the number
          -
            name: defaultValue
            type: Number
            nullable: true
            summary: The value to return if the key is not in the object.  May
              be `null`.
        description: |
          If the key isn't a number or isn't within the given range,
          an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.
        note: You can use `Infinity` or `-Infinity` for max or min to indicate
          no limit.
      -
        name: integerForKey
        kind: method
        type: Number
        summary: Get an integer for the given required key
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
        description: |
          If the key is missing or isn't an integer, an error will be thrown.
      -
        name: integerForKey
        suffix: default
        kind: method
        type: Number
        summary: Get an integer for the given key, or return a default value
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: defaultValue
            type: Number
            nullable: true
            summary: The value to return if the key is not in the object.  May
              be `null`.
        description: |
          If the key isn't an integer an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.
      -
        name: integerForKeyInRange
        kind: method
        type: Number
        summary: Get an integer for the given required key
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: min
            type: Number
            summary: The minimum value for the integer
          -
            name: max
            type: Number
            summary: The maximum value for the integer
        description: |
          If the key is missing, isn't an integer, or is outside the given range,
          an error will be thrown.
        note: You can use `Infinity` or `-Infinity` for max or min to indicate
          no limit.
      -
        name: integerForKeyInRange
        suffix: default
        kind: method
        type: Number
        summary: Get an integer for the given key, or return a default value
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: min
            type: Number
            summary: The minimum value for the number
          -
            name: max
            type: Number
            summary: The maximum value for the number
          -
            name: defaultValue
            type: Number
            nullable: true
            summary: The value to return if the key is not in the object.  May
              be `null`.
        description: |
          If the key isn't an integer or isn't within the given range,
          an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.
        note: You can use `Infinity` or `-Infinity` for max or min to indicate
          no limit.
  -
    name: Boolean Properties
    members:
      -
        name: booleanForKey
        kind: method
        type: boolean
        summary: Get a boolean for the given required key
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
        description: |
          If the key is missing or isn't a boolean, an error will be thrown
      -
        name: booleanForKey
        suffix: default
        kind: method
        type: boolean
        summary: Get a boolean for the given key, or return a default value
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: defaultValue
            type: boolean
            summary: The value to return if the key is not in the object
        description: |
          If the key isn't a boolean, an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.
  -
    name: Object Properties
    members:
      -
        name: objectForKey
        kind: method
        type: SKValidatingObject
        summary: Get a validating object for the given required key
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
        description: |
          If the key is missing or isn't a object, an error will be thrown
      -
        name: objectForKey
        suffix: default
        kind: method
        type: SKValidatingObject
        summary: Get a validating object for the given key, or return a default value
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: defaultValue
            type: object
            summary: The value to return if the key is not in the object
        description: |
          If the key isn't a object, an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.
      -
        name: validObjectForKey
        kind: method
        type: SKValidatingConstruction
        summary: Get a fully validated instance of the given calss for the given
          required key
        arguments:
          -
            name: validatingConstructionClass
            type: JSClass
            summary: The class of object to instantiate
          -
            name: key
            type: String
            summary: The name of property to validate
        description: |
          If the key is missing or isn't a object, an error will be thrown
      -
        name: validObjectForKey
        suffix: default
        kind: method
        type: SKValidatingConstruction
        summary: Get a fully validated instance of the given calss for the given
          key, or return a default value
        arguments:
          -
            name: validatingConstructionClass
            type: JSClass
            summary: The class of object to instantiate
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: defaultValue
            type: object
            summary: The value to return if the key is not in the object
        description: |
          If the key isn't a object, an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.
  -
    name: Array Properties
    members:
      -
        name: arrayForKey
        kind: method
        type: SKValidatingObject
        summary: Get a validating array for the given required key
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
        description: |
          If the key is missing or isn't a array, an error will be thrown
      -
        name: arrayForKey
        suffix: default
        kind: method
        type: SKValidatingObject
        summary: Get a validating array for the given key, or return a default value
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: defaultValue
            type: Array
            summary: The value to return if the key is not in the object
        description: |
          If the key isn't a object, an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.
  -
    name: Set Validation
    members:
      -
        name: optionForKey
        kind: method
        type: any
        summary: Verify that the input is included in a given set of allowed
          values
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: optionSet
            type: Set
            summary: The allowed values
        description: |
          If the key is missing or isn't a valid option, an error will be thrown
      -
        name: optionForKey
        suffix: default
        kind: method
        type: any
        summary: Verify that the input is included in a given set of allowed
          values, or return a default value
        arguments:
          -
            name: key
            type: String
            summary: The name of property to validate
          -
            name: optionSet
            type: Set
            summary: The allowed values
          -
            name: defaultValue
            type: option
            summary: The value to return if the key is not in the object
        description: |
          If the key isn't a valid option, an error will be thrown.

          If the key is missing entirely, the `defaultValue`() will be returned.
  -
    name: Wrapped Arrays
    members:
      -
        name: length
        type: Number
        summary: The number of items in the wrapped array