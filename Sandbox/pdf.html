<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="Foundation/Foundation+HTML.js"></script>
  <script type="text/javascript" src="Foundation/String+JS.js"></script>
  <script type="text/javascript" src="Foundation/Uint8Array+JS.js"></script>
  <script type="text/javascript" src="Foundation/CoreTypes.js"></script>
  <script type="text/javascript" src="Foundation/Javascript.js"></script>
  <script type="text/javascript" src="Foundation/MD5.js"></script>
  <script type="text/javascript" src="Foundation/UUID.js"></script>
  <script type="text/javascript" src="Zlib/Adler32.js"></script>
  <script type="text/javascript" src="Zlib/Huffman.js"></script>
  <script type="text/javascript" src="Zlib/Deflate.js"></script>
  <script type="text/javascript" src="Zlib/Zlib.js"></script>
  <script type="text/javascript" src="LZW/LZW.js"></script>
  <script type="text/javascript" src="Foundation/JSClass.js"></script>
  <script type="text/javascript" src="Foundation/JSObject.js"></script>
  <script type="text/javascript" src="Foundation/JSData.js"></script>
  <script type="text/javascript" src="PDFKit/PDFFilter.js"></script>
  <script type="text/javascript" src="PDFKit/PDFLexical.js"></script>
  <script type="text/javascript" src="PDFKit/PDFASCIIHexFilter.js"></script>
  <script type="text/javascript" src="PDFKit/PDFASCII85Filter.js"></script>
  <script type="text/javascript" src="PDFKit/PDFPredictorFilter.js"></script>
  <script type="text/javascript" src="PDFKit/PDFLZWFilter.js"></script>
  <script type="text/javascript" src="PDFKit/PDFDeflateFilter.js"></script>
  <style type="text/css">
  html, body {
    padding: 0;
    margin: 0;
    height: 100%;
    overflow: hidden;
    background-color: blue;
    font: monospace;
  }
  textarea {
    width: 50%;
    height: 100%;
    box-sizing: border-box;
    margin: 0;
    font-family: monospace;
  }
  </style>
<body>
  <script type="text/javascript">
  var Controller = function(){
    var body = document.body;
    body.addEventListener('dragover', this);
    body.addEventListener('drop', this);
    this.inputArea = body.appendChild(document.createElement('textarea'));
    // this.encodedArea = body.appendChild(document.createElement('textarea'));
    this.decodedArea = body.appendChild(document.createElement('textarea'));
    this.inputArea.addEventListener('blur', this);
    // this.inputArea.value = "2 J\nBT\n/F1 12 Tf\n0 Tc\n0 Tw\n72.5 712 TD\n[(Unfiltered streams can be read easily) 65 (, )] TJ\n0 -14 TD\n[(b) 20 (ut generally tak) 10 (e more space than \\311)] TJ\nT* (compressed streams.) Tj\n0 -28 TD\n[(Se) 25 (v) 15 (eral encoding methods are a) 20 (v) 25 (ailable in PDF) 80 (.)] TJ\n0 -14 TD\n(Some are used for compression and others simply) Tj\nT* [(to represent binary data in an ) 55 (ASCII format.)] TJ\nT* (Some of the compression filters are \\\nsuitable ) Tj\nT* (for both data and images, while others are \\\nsuitable only ) Tj\nT* (for continuous-tone images.) Tj\nET";
  };
  Controller.prototype = {
    handleEvent: function(e){
      this[e.type](e);
    },
    dragover: function(e){
      e.preventDefault();
    },
    drop: function(e){
      e.preventDefault();
      var file = e.dataTransfer.files[0];
      var reader = new FileReader();
      reader.addEventListener('load', this);
      reader.readAsArrayBuffer(file);
    },
    load: function(e){
      var bytes = new Uint8Array(e.target.result);
      var filter = PDFLZWFilter.init();
      var data = JSData.initWithBytes(bytes);
      data = filter.encode(data);
      this.inputArea.value = data.bytes.hexStringRepresentation();
      data = filter.decode(data);
      this.decodedArea.value = data.bytes.stringUsingASCIIDecoding();
    },
    blur: function(e){
      var filter = PDFASCII85Filter.init();
      var bytes = this.inputArea.value.bytesUsingUTF8Encoding();
      var data = JSData.initWithBytes(bytes);
      // var encoded = filter.encode(data);
      // this.encodedArea.value = encoded.bytes.stringUsingUTF8Decoding();
      // var decoded = filter.decode(encoded);
      // this.decodedArea.value = decoded.bytes.stringUsingUTF8Decoding();
    }
  };
  var controller = new Controller();
  </script>
</body>
</html>